import{m as g,u as I}from"./chunk-XQSHTZQE.js";import{$a as h,Fb as i,Hb as a,Na as m,Ra as o,Wa as d,cb as x,mb as u,pb as f,tb as r,ub as c,vb as p,yb as w}from"./chunk-RHHAP76N.js";var S=Math.pow(10,8)*24*60*60*1e3,k=-S;var y=36e5;var O=3600;var C=O*24,F=C*7,P=C*365.2425,W=P/12,z=W*3,l=Symbol.for("constructDateFrom");function s(t,n){return typeof t=="function"?t(n):t&&typeof t=="object"&&l in t?t[l](n):t instanceof Date?new t.constructor(n):new Date(n)}function v(t,n){return s(n||t,t)}function D(t,n,e){return s(e?.in||t,+v(t)+n)}function M(t,n,e){return D(t,n*y,e)}function H(t,n){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),r(4,"div"),i(5),p(6,"br"),i(7),c()(),r(8,"div",4),i(9),c(),r(10,"div",4),i(11),c(),r(12,"div",4),i(13),c(),r(14,"div",5),i(15),c()()()),t&2){let e=w();o(3),u("src",e.weatherData.current.condition.icon,m),o(2),a(" ",e.weatherData.location.name,""),o(2),a("",e.weatherData.current.temp_c,"\xB0C "),o(2),a(" Real feel: ",e.weatherData.current.feelslike_c,"\xB0C "),o(2),a(" Wind speed: ",e.weatherData.current.wind_kph,"km/h "),o(2),a(" Humidity: ",e.weatherData.current.humidity,"% "),o(2),a(" Updated: ",e.weatherData.current.last_updated," ")}}var _=class t{constructor(n){this.http=n}weatherData;apiKey="536a50aa17e8463dbe0165247252903";location="Belgrade";locationStorageKey="app-weather-location";ngOnInit(){let n=this.getCachedLocation();if(n){this.location=n,this.fetchWeather();return}navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.location=e?`${e.coords.latitude},${e.coords.longitude}`:this.location,this.cacheLocation(this.location),this.fetchWeather()},()=>this.fetchWeather()):this.fetchWeather()}fetchWeather(){let n=`https://api.weatherapi.com/v1/current.json?key=${this.apiKey}&q=${this.location}&aqi=yes`;(this.weatherData==null||this.weatherData.location.name!==this.location||new Date(this.weatherData.current.last_updated)<M(new Date,1))&&this.http.get(n).subscribe(e=>{this.weatherData=e})}getCachedLocation(){try{return localStorage.getItem(this.locationStorageKey)}catch{return null}}cacheLocation(n){try{localStorage.setItem(this.locationStorageKey,n)}catch{return}}static \u0275fac=function(e){return new(e||t)(d(I))};static \u0275cmp=h({type:t,selectors:[["app-weather"]],decls:1,vars:1,consts:[[1,"weather-container"],[1,"weather-info"],[1,"weather-title"],["alt","",1,"weather-icon",3,"src"],[1,"weather-info-text"],[1,"weather-info-side-text"]],template:function(e,b){e&1&&x(0,H,16,7,"div",0),e&2&&f(b.weatherData?0:-1)},dependencies:[g],styles:[".weather-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px;background:#000000b3;border:2px solid rgb(0,255,0);border-radius:10px;color:#0f0;font-family:Courier New,monospace;width:380px;height:230px}.weather-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #0f0}.weather-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.weather-icon[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 5px rgb(0,255,0))}.weather-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.1rem;font-size:2rem}.weather-info-text[_ngcontent-%COMP%]{font-size:1rem}.weather-info-side-text[_ngcontent-%COMP%]{font-size:1rem;font-style:italic}@media (max-width: 900px){.weather-container[_ngcontent-%COMP%]{width:230px;height:180px}.weather-title[_ngcontent-%COMP%]{font-size:1.25rem}.weather-info-text[_ngcontent-%COMP%], .weather-info-side-text[_ngcontent-%COMP%]{font-size:.8rem}}"]})};export{_ as WeatherComponent};
