import{a as l}from"./chunk-VP5QEZ2X.js";import{a as h}from"./chunk-SZJ6MPGP.js";import{X as n,aa as i,g as s}from"./chunk-RHHAP76N.js";var m="projectsCache:v1",p=24*60*60*1e3,S=h.projectsCsvUrl,d=class r{constructor(t){this.sheets=t}getProjects(){return s(this,null,function*(){let t=this.readCache();if(t)return t;let o=(yield this.sheets.fetchBooksFromSheet(S)).slice().sort((a,c)=>a.yearStarted>c.yearStarted?-1:c.yearStarted>a.yearStarted?1:0);return this.writeCache(o),o})}prefetch(){this.getProjects().catch(()=>{})}readCache(){try{let t=localStorage.getItem(m);if(!t)return null;let e=JSON.parse(t);return Date.now()-e.ts>p?null:e.data}catch{return null}}writeCache(t){try{localStorage.setItem(m,JSON.stringify({ts:Date.now(),data:t}))}catch{}}static \u0275fac=function(e){return new(e||r)(i(l))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{d as a};
